{% extends "base.html" %}
{% block content %}
    <hr>
    <section class="AboutMeCenter">
        <section class="PictureBox">
                <h2 style="border: 2px solid #444; padding:10px; background-color: wheat;">{{ user.Username }}'s About Me Page</h2>
            {% if picture %}
                <img src="{{ url_for('static', filename='profileuploads/' ~ picture.FileNamePFP) }}" alt="Profile Picture" id="PFP" name="PFP" 
                style="border: 5px solid #272727ff; border-radius: 60%; max-width: 160px; max-height: 160px; height: 160px; width: 180px;">
            {% else %}
                <p style="color: wheat;">No profile picture yet.</p>
            {% endif %}
        </section>
            {% if aboutme %}
                <p style="padding: 10px; font-size:18px;">{{ aboutme.Description | replace('\n', '<br>') | safe }}</p>
            {% else %}
                <p>No bio yet. Go and <a href="{{ url_for('settings') }}">create</a> one!</p>
            {% endif %}
    </section>
    <hr>
    <h2>{{ user.Username }}'s Blogs</h2>
        {% for blog in blogs %}
            <section class="blogs">
                <h3 style="font-size: 1.3em;"><a href="{{ url_for('blog_display', blog_id=blog.BlogID) }}" class="ui">{{ blog.BlogName }}</a></h3>
                <h3>Relevant Topics:</h3>
                {% for categoryship in blog.categoryships %}
                    <ul>
                        <li>{{ categoryship.category.CategoryName }}</li>
                    </ul>
                {% endfor %}
            </section>
            <hr>
        {% else %}
            <p>No blogs yet. Go and <a href="{{ url_for('add_blog') }}">create</a> one!</p>
            <hr>
        {% endfor %}
    <h2>{{user.Username}}'s Portfolio Showcase</h2>
        {% for item in portfolios %}
            <div class="portfolio-entry">
                    <h3 style="font-size: 1.3em;">
                        {{ item.Title }} |
                        {% if current_user.id == item.UserID or current_user.is_admin %}
                            <a href="{{ url_for('edit_portfolio', portfolio_id=item.PortfolioID) }}">Edit</a>
                            <form method="POST" action="{{ url_for('delete_portfolio', portfolio_id=item.PortfolioID) }}" style="display:inline;">
                                <button type="submit">Delete</button>
                            </form>
                        {% endif %}
                    </h3>
                    <ul>
                        <li><p>{{ item.Description }}</p></li>
                    <ul>
                {% if item.CodeSnippet %}
                    <pre><code>{{ item.CodeSnippet }}</code></pre>
                    <iframe srcdoc="{{ item.CodeSnippet | safe }}" style="width:50%; height:50%; background-color: white;"></iframe>
                {% endif %}

                {% if item.ImagePath %}
                    <img src="{{ url_for('static', filename='uploads/' ~ item.ImagePath) }}" alt="Portfolio Image" style="max-width: 400px;">
                {% endif %}
            </div>
            <hr>
            {% else %}
                <p>No portfolio entries yet. Go and <a href="{{ url_for('add_portfolio') }}">create</a> one!</p>
                <hr>
        {% endfor %}
{% endblock %}